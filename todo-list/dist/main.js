(()=>{"use strict";const e=[];function t(){return e}function n(t){return e.find((e=>e.getName()===t))}function i(t){if(void 0!==n(t)){let n=e.findIndex((e=>e.getName()===t));e.splice(n,1)}}class l{#e;#t;constructor(e,t){this.#e=e,this.#t=t}get name(){return this.#e}get date(){return this.#t}}document.querySelector("#content"),document.querySelector("#sidebar");const d=document.querySelector("#header"),o=document.querySelector("#popup"),r=document.querySelector("#popup-background"),c=document.querySelector("#todo-list");let a="";function u(){const e=document.querySelector("#sidebar");let n=t();e.replaceChildren();let l=document.createElement("h1");l.innerHTML="Projects",e.appendChild(l),n.forEach((t=>{let n=document.createElement("div");n.setAttribute("class","project"),e.appendChild(n);let l=document.createElement("p");l.innerHTML=`${t.getName()}`,n.appendChild(l);let d=document.createElement("p");d.innerHTML=`${t.getTodoList().length}`,n.appendChild(d);let o=document.createElement("button");o.setAttribute("type","button"),o.setAttribute("class","remove-button"),o.innerHTML="X",n.appendChild(o),n.addEventListener("click",(()=>{a=t.getName(),s(a),m(a)})),n.addEventListener("mouseover",(()=>{o.style.visibility="visible"})),n.addEventListener("mouseleave",(()=>{o.style.visibility="hidden"})),o.addEventListener("click",(e=>{i(t.getName()),u(),s(),e.stopPropagation()}))}))}function s(t){d.replaceChildren();let i=document.createElement("h1");i.innerHTML=void 0===t?"WELCOME":t,d.appendChild(i);let c=document.createElement("div");c.setAttribute("class","buttons"),d.appendChild(c);let s=document.createElement("button");if(s.setAttribute("type","button"),s.innerHTML="NEW PROJECT",c.appendChild(s),s.addEventListener("click",(t=>{!function(){let t=document.createElement("label");t.setAttribute("for","newProjectName"),t.innerHTML="New Project Name";let i=document.createElement("input");i.setAttribute("type","text"),i.setAttribute("id","newProjectName");let l=document.createElement("button");l.setAttribute("type","button"),l.innerHTML="CREATE NEW PROJECT",o.replaceChildren(),o.appendChild(t),o.appendChild(i),o.appendChild(l),o.style.visibility="visible",r.style.visibility="visible",l.addEventListener("click",(()=>{let t=i.value;console.log(t),""!==t&&(function(t){if(void 0!==n(t))return console.log("Duplicate project name"),-1;let i=(e=>{const t=[];return{setName:t=>{e=t},getName:()=>e,addTodo:e=>{t.push(e)},getTodoList:()=>t}})(t);e.push(i)}(t),u()),p()})),r.addEventListener("click",(()=>{p()}))}()})),void 0!==t){let e=document.createElement("button");e.setAttribute("type","button"),e.innerHTML="NEW TASK",c.appendChild(e),e.addEventListener("click",(e=>{!function(){let e=document.createElement("label");e.setAttribute("for","newTaskName"),e.innerHTML="New Task Name";let t=document.createElement("input");t.setAttribute("type","text"),t.setAttribute("id","newTaskName");let i=document.createElement("label");i.setAttribute("for","newTaskDate"),i.innerHTML="Date";let d=document.createElement("input");d.setAttribute("type","date"),d.setAttribute("id","newTaskDate");let c=document.createElement("button");c.setAttribute("type","button"),c.innerHTML="CREATE NEW TASK",o.replaceChildren(),o.appendChild(e),o.appendChild(t),o.appendChild(i),o.appendChild(d),o.appendChild(c),o.style.visibility="visible",r.style.visibility="visible",c.addEventListener("click",(()=>{let e=t.value,i=d.value;console.log(e),console.log(i),""!==e&&""!==i&&(function(e,t,i){let d=new l(t,i),o=n(e);void 0!==o&&(console.log(o),o.addTodo(d))}(a,e,i),m(a),u(),p())})),r.addEventListener("click",(()=>{p()}))}()}))}}function p(){o.style.visibility="hidden",r.style.visibility="hidden"}function m(e){let t=n(e);void 0!==t&&(c.replaceChildren(),t.getTodoList().forEach((i=>{let l=document.createElement("div");c.appendChild(l);let d=document.createElement("p");d.innerHTML=i.name,l.appendChild(d);let o=document.createElement("p");o.innerHTML=i.date,l.appendChild(o),l.addEventListener("click",(()=>{l.style.opacity="0",setTimeout((()=>{(function(e,t){let i=function(e,t){let i=n(e);return console.log(i),void 0===i?-1:i.getTodoList().findIndex((e=>e.name===t))}(e,t);if(-1===i)return"Invalid task name";let l=n(e);void 0===l||l.getTodoList().splice(i,1)})(t.getName(),i.name),m(e),u()}),1e3)}))})))}u(),s(),m()})();